<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Katalog Barang HP - SINAR MUTIARA CELL</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            position: relative;
        }

        /* Login Modal */
        .login-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .login-form {
            background: white;
            padding: 40px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .login-form h2 {
            color: #1a2980;
            margin-bottom: 20px;
            text-align: center;
        }

        .login-form input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .login-form button {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
        }

        .login-form button:hover {
            opacity: 0.9;
        }

        .error-message {
            color: #e74c3c;
            font-size: 0.9rem;
            text-align: center;
            margin-top: 10px;
            display: none;
        }

        /* Admin Bar */
        .admin-bar {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 10px 30px;
            display: none;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .admin-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .admin-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .admin-btn {
            padding: 8px 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .admin-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .admin-btn.logout {
            background: #e74c3c;
        }

        .admin-btn.logout:hover {
            background: #c0392b;
        }

        /* Header Styles */
        .header {
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: white;
            padding: 20px 30px;
            text-align: center;
            position: relative;
        }

        .header.editable {
            cursor: pointer;
            transition: background 0.3s;
        }

        .header.editable:hover {
            background: linear-gradient(135deg, #2a3a90, #36e0de);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .logo {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            border: 3px solid #ffeb3b;
            overflow: hidden;
            position: relative;
        }

        .logo.editable:hover::after {
            content: "✎";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            border-radius: 50%;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 8px;
        }

        .logo i {
            font-size: 40px;
            color: #1a2980;
        }

        .brand-text {
            text-align: left;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 5px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header .tagline {
            font-size: 1.1rem;
            opacity: 0.9;
            font-style: italic;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-top: 10px;
        }

        .header a {
            color: #ffeb3b;
            text-decoration: none;
            font-weight: 600;
        }

        .header a:hover {
            text-decoration: underline;
        }

        /* Catalog Title */
        .catalog-title {
            padding: 20px 30px;
            border-bottom: 1px solid #eee;
            background: linear-gradient(to right, #f8fafc, #eef2f7);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .catalog-title h2 {
            color: #2c3e50;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Ganti tombol edit dengan gambar pensil */
        .edit-toggle-pencil {
            background: none;
            border: none;
            color: #f39c12;
            cursor: pointer;
            font-size: 1.8rem;
            padding: 5px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .edit-toggle-pencil:hover {
            transform: scale(1.2);
            color: #e67e22;
        }

        /* Product Count */
        .product-count {
            padding: 15px 30px;
            background-color: #f8fafc;
            border-bottom: 1px solid #e1e8ed;
            text-align: center;
        }

        .product-count p {
            color: #2c3e50;
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* Search and Filter */
        .search-filter {
            padding: 20px 30px;
            background-color: #f8fafc;
            border-bottom: 1px solid #e1e8ed;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 12px 20px 12px 45px;
            border: 1px solid #d1d9e6;
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .search-box input:focus {
            outline: none;
            border-color: #1a2980;
            box-shadow: 0 0 0 3px rgba(26, 41, 128, 0.1);
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #7f8c8d;
        }

        .filter-brand {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            background: white;
            border: 1px solid #d1d9e6;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            color: #2c3e50;
            transition: all 0.3s;
        }

        .filter-btn:hover {
            background: #f0f0f0;
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .filter-btn.active {
            background: #1a2980;
            color: white;
            border-color: #1a2980;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(26, 41, 128, 0.2);
        }

        /* Table Section - Edit Mode */
        .table-section.edit-mode td {
            position: relative;
        }

        .table-section.edit-mode .editable {
            cursor: text;
            transition: background 0.3s;
        }

        .table-section.edit-mode .editable:hover {
            background: #e8f4fc;
        }

        .table-section.edit-mode .editable:focus {
            background: white;
            outline: 2px solid #3498db;
        }

        .edit-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #3498db;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .edit-input-small {
            width: 100%;
            padding: 6px;
            border: 1px solid #3498db;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .save-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 5px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }

        .save-btn:hover {
            background: #219653;
        }

        /* Table Section */
        .table-section {
            padding: 0 30px 25px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);
        }

        table thead {
            background: linear-gradient(to right, #2c3e50, #34495e);
            color: white;
        }

        table th {
            padding: 18px 15px;
            text-align: left;
            font-weight: 600;
            font-size: 1rem;
        }

        table tbody tr {
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s;
        }

        table tbody tr:hover {
            background-color: #f8fafc;
        }

        table td {
            padding: 18px 15px;
            vertical-align: top;
        }

        .product-info {
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .product-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            flex-shrink: 0;
            border: 1px solid #eaeaea;
            background-color: #f9f9f9;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .product-image.editable:hover::after {
            content: "✎";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            border-radius: 8px;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-image i {
            font-size: 30px;
            color: #bbb;
        }

        .product-details {
            flex: 1;
        }

        .product-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
            font-size: 1.05rem;
        }

        .product-spec {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .price {
            color: #e74c3c;
            font-weight: 600;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 10px 15px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .whatsapp-btn {
            background: linear-gradient(to right, #25D366, #128C7E);
            color: white;
            flex: 1;
        }

        .whatsapp-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(37, 211, 102, 0.2);
        }

        .tokopedia-btn {
            background: linear-gradient(to right, #03ac0e, #029107);
            color: white;
            flex: 1;
        }

        .tokopedia-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(3, 172, 14, 0.2);
        }

        /* Edit Controls */
        .edit-controls {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
            display: none;
        }

        .edit-control-btn {
            background: #3498db;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        .edit-control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .edit-control-btn.save-all {
            background: #27ae60;
        }

        .edit-control-btn.add-product {
            background: #9b59b6;
        }

        .edit-control-btn.edit-header {
            background: #e74c3c;
        }

        .edit-control-btn.edit-footer {
            background: #f39c12;
        }

        /* Edit Modal */
        .edit-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .edit-modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .edit-modal-content h3 {
            color: #1a2980;
            margin-bottom: 20px;
            text-align: center;
        }

        .edit-modal-content label {
            display: block;
            margin: 15px 0 5px;
            font-weight: 600;
            color: #2c3e50;
        }

        .edit-modal-content input,
        .edit-modal-content select,
        .edit-modal-content textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .edit-modal-content textarea {
            min-height: 100px;
            resize: vertical;
        }

        .edit-modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .edit-modal-buttons button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
        }

        .edit-modal-buttons .save-modal-btn {
            background: #27ae60;
            color: white;
        }

        .edit-modal-buttons .cancel-modal-btn {
            background: #95a5a6;
            color: white;
        }

        /* Pagination */
        .pagination {
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #eee;
            background-color: #f8fafc;
        }

        .show-entries {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            color: #2c3e50;
        }

        .show-entries select {
            padding: 8px 15px;
            border: 1px solid #d1d9e6;
            border-radius: 6px;
            background-color: white;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .show-entries select:hover {
            border-color: #1a2980;
        }

        .show-entries select:focus {
            outline: none;
            border-color: #1a2980;
            box-shadow: 0 0 0 3px rgba(26, 41, 128, 0.1);
        }

        .page-info {
            color: #7f8c8d;
            font-weight: 600;
        }

        .page-nav {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .page-btn {
            padding: 8px 15px;
            background: white;
            border: 1px solid #d1d9e6;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            color: #2c3e50;
            transition: all 0.3s;
            min-width: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .page-btn:hover:not(:disabled) {
            background: #f0f0f0;
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        .page-btn.active {
            background: #1a2980;
            color: white;
            border-color: #1a2980;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(26, 41, 128, 0.2);
        }

        .page-btn i {
            font-size: 0.9rem;
        }

        /* Footer */
        .footer {
            padding: 20px 30px;
            text-align: center;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: #ecf0f1;
            font-size: 0.9rem;
        }

        .footer.editable {
            cursor: pointer;
            transition: background 0.3s;
        }

        .footer.editable:hover {
            background: linear-gradient(135deg, #3c4e60, #44596f);
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-logo .logo-small {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .footer-logo .logo-small img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 5px;
        }

        .footer-logo .logo-small i {
            color: #1a2980;
            font-size: 20px;
        }

        .footer-info {
            flex: 1;
            min-width: 300px;
        }

        .footer a {
            color: #1abc9c;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .whatsapp-contact {
            background: #25D366;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.2s;
        }

        .whatsapp-contact:hover {
            transform: translateY(-2px);
            text-decoration: none;
        }

        /* Editable elements highlight */
        .editable-highlight {
            border: 2px dashed #3498db !important;
            position: relative;
        }

        .editable-highlight::after {
            content: "✎";
            position: absolute;
            top: 5px;
            right: 5px;
            background: #3498db;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .footer-content {
                flex-direction: column;
                text-align: center;
            }
            
            .product-image {
                width: 70px;
                height: 70px;
            }
            
            .search-filter {
                flex-direction: column;
            }
            
            .search-box {
                min-width: 100%;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .catalog-title {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .admin-bar {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .edit-controls {
                bottom: 20px;
                right: 20px;
            }
            
            .edit-control-btn {
                width: 45px;
                height: 45px;
                font-size: 1rem;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .logo-container {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .brand-text {
                text-align: center;
            }
            
            .pagination {
                flex-direction: column;
                gap: 15px;
                align-items: center;
            }
            
            .page-info {
                order: 2;
            }
            
            .page-nav {
                order: 3;
                justify-content: center;
            }
            
            .show-entries {
                order: 1;
            }
            
            table {
                font-size: 0.9rem;
            }
            
            table th, table td {
                padding: 12px 10px;
            }
            
            .product-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .product-image {
                width: 60px;
                height: 60px;
            }
            
            .page-nav {
                flex-wrap: wrap;
            }
            
            .action-btn {
                padding: 8px 12px;
                font-size: 0.85rem;
            }
            
            .edit-modal-content {
                padding: 20px;
            }
        }

        @media (max-width: 576px) {
            body {
                padding: 10px;
            }
            
            .container {
                border-radius: 8px;
            }
            
            .header, .catalog-title, .product-count, .search-filter, .table-section, .pagination {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .logo {
                width: 60px;
                height: 60px;
            }
            
            .logo i {
                font-size: 30px;
            }
            
            table {
                display: block;
                overflow-x: auto;
            }
            
            .filter-btn {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .edit-controls {
                bottom: 15px;
                right: 15px;
            }
            
            .edit-control-btn {
                width: 40px;
                height: 40px;
                font-size: 0.9rem;
            }
            
            .page-btn {
                padding: 6px 12px;
                min-width: 35px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Login Modal -->
    <div class="login-modal" id="loginModal">
        <div class="login-form">
            <h2><i class="fas fa-lock"></i> Admin Login</h2>
            <input type="text" id="username" placeholder="Username">
            <input type="password" id="password" placeholder="Password">
            <button onclick="login()">Login</button>
            <div class="error-message" id="loginError">Username atau password salah!</div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="edit-modal" id="editModal">
        <div class="edit-modal-content" id="editModalContent">
            <!-- Content akan diisi secara dinamis -->
        </div>
    </div>

    <div class="container">
        <!-- Admin Bar -->
        <div class="admin-bar" id="adminBar">
            <div class="admin-info">
                <span><i class="fas fa-user-shield"></i> Admin Mode</span>
                <span id="adminUsername"></span>
            </div>
            <div class="admin-controls">
                <button class="admin-btn" onclick="toggleEditMode()">
                    <i class="fas fa-edit"></i> Edit Mode: <span id="editModeStatus">OFF</span>
                </button>
                <button class="admin-btn" onclick="saveAllChanges()">
                    <i class="fas fa-save"></i> Simpan Semua
                </button>
                <button class="admin-btn logout" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>

        <!-- Header dengan Logo -->
        <div class="header" id="siteHeader" onclick="editHeader()">
            <div class="logo-container">
                <div class="logo" id="siteLogo" onclick="editLogo(event)">
                    <img src="https://img.ws.mms.shopee.co.id/a763bb88d328247910a59170a4090a5b" alt="SINAR MUTIARA CELL Logo">
                </div>
                <div class="brand-text">
                    <h1 id="siteTitle">SINAR MUTIARA CELL</h1>
                    <div class="tagline" id="siteTagline">Toko Handphone & Tablet Terpercaya</div>
                </div>
            </div>
            <p id="headerDescription">Pembelian dapat dilakukan secara offline atau melalui <a href="https://tiktokshopbytokopedia.olshopku.com" target="_blank" id="tokopediaLinkHeader">SHOP TOKOPEDIA kami</a>.</p>
        </div>

        <!-- Catalog Title -->
        <div class="catalog-title">
            <h2><i class="fas fa-mobile-alt"></i> <span id="catalogTitle">Katalog Barang HP</span></h2>
            <!-- Tombol pensil untuk mode edit -->
            <button class="edit-toggle-pencil" id="editTogglePencil" onclick="showLogin()" title="Klik untuk edit">
                ✎
            </button>
        </div>

        <!-- Product Count -->
        <div class="product-count">
            <p><i class="fas fa-boxes"></i> <span id="countText">Menampilkan <span id="display-count">0</span> Produk Tersedia</span></p>
        </div>

        <!-- Search and Filter -->
        <div class="search-filter">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="search-input" placeholder="Cari produk berdasarkan nama atau spesifikasi...">
            </div>
            <div class="filter-brand" id="filterBrand">
                <button class="filter-btn active" data-brand="all" onclick="filterByBrand('all')">Semua Merek</button>
                <button class="filter-btn" data-brand="iphone" onclick="filterByBrand('iphone')">iPhone</button>
                <button class="filter-btn" data-brand="samsung" onclick="filterByBrand('samsung')">Samsung</button>
                <button class="filter-btn" data-brand="xiaomi" onclick="filterByBrand('xiaomi')">Xiaomi</button>
                <button class="filter-btn" data-brand="oppo" onclick="filterByBrand('oppo')">Oppo</button>
                <button class="filter-btn" data-brand="vivo" onclick="filterByBrand('vivo')">Vivo</button>
                <button class="filter-btn" data-brand="realme" onclick="filterByBrand('realme')">Realme</button>
                <button class="filter-btn" data-brand="infinix" onclick="filterByBrand('infinix')">Infinix</button>
            </div>
        </div>

        <!-- Table Section -->
        <div class="table-section" id="tableSection">
            <table>
                <thead>
                    <tr>
                        <th width="50%">Barang</th>
                        <th width="25%">Harga Jual</th>
                        <th width="25%">Aksi</th>
                    </tr>
                </thead>
                <tbody id="product-table">
                    <!-- Data akan dimasukkan via JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Edit Controls -->
        <div class="edit-controls" id="editControls">
            <button class="edit-control-btn add-product" onclick="addNewProduct()" title="Tambah Produk">
                <i class="fas fa-plus"></i>
            </button>
            <button class="edit-control-btn edit-header" onclick="editHeader()" title="Edit Header">
                <i class="fas fa-heading"></i>
            </button>
            <button class="edit-control-btn edit-footer" onclick="editFooter()" title="Edit Footer">
                <i class="fas fa-shoe-prints"></i>
            </button>
            <button class="edit-control-btn save-all" onclick="saveAllChanges()" title="Simpan Semua">
                <i class="fas fa-save"></i>
            </button>
        </div>

        <!-- Pagination -->
        <div class="pagination">
            <div class="show-entries">
                <span id="showText">Tampilkan:</span> 
                <select id="show-entries-select">
                    <option value="10">10</option>
                    <option value="25">25</option>
                    <option value="50" selected>50</option>
                    <option value="100">100</option>
                    <option value="all">Semua</option>
                </select>
            </div>
            <div class="page-info">
                <span id="pageInfoText">Menampilkan <span id="start">1</span> - <span id="end">50</span> dari <span id="total">0</span> entri</span>
            </div>
            <div class="page-nav">
                <button class="page-btn" id="prev-page" onclick="goToPrevPage()" disabled>
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="page-btn" id="page-1" onclick="goToPage(1)">1</button>
                <button class="page-btn" id="page-2" onclick="goToPage(2)">2</button>
                <button class="page-btn" id="page-3" onclick="goToPage(3)">3</button>
                <button class="page-btn" id="page-4" onclick="goToPage(4)">4</button>
                <button class="page-btn" id="page-5" onclick="goToPage(5)">5</button>
                <button class="page-btn" id="next-page" onclick="goToNextPage()">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer" id="siteFooter" onclick="editFooter()">
            <div class="footer-content">
                <div class="footer-logo">
                    <div class="logo-small">
                        <img src="https://img.ws.mms.shopee.co.id/a763bb88d328247910a59170a4090a5b" alt="SINAR MUTIARA CELL Logo">
                    </div>
                    <div id="footerBrand">SINAR MUTIARA CELL</div>
                </div>
                <div class="footer-info">
                    <p id="footerCopyright">© 2023 SINAR MUTIARA CELL - Katalog Barang HP</p>
                    <p id="footerContact">Hubungi kami: <a href="tel:+6285977651240" id="footerPhone">085977651240</a></p>
                    <a href="https://wa.me/6285977651240" class="whatsapp-contact" target="_blank" id="footerWhatsApp">
                        <i class="fab fa-whatsapp"></i> <span id="whatsappText">Chat via WhatsApp</span>
                    </a>
                </div>
                <div class="social-links">
                    <p id="socialText">Follow kami:</p>
                    <div style="margin-top: 10px;">
                        <a href="#" style="color: white; margin: 0 10px; font-size: 1.2rem;" id="instagramLink"><i class="fab fa-instagram"></i></a>
                        <a href="#" style="color: white; margin: 0 10px; font-size: 1.2rem;" id="facebookLink"><i class="fab fa-facebook"></i></a>
                        <a href="https://tiktokshopbytokopedia.olshopku.com" style="color: white; margin: 0 10px; font-size: 1.2rem;" id="storeLink"><i class="fas fa-store"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data lengkap halaman - WA diubah ke 6285977651240
        const pageData = {
            // Header
            title: "SINAR MUTIARA CELL",
            tagline: "Toko Handphone & Tablet Terpercaya",
            description: "Pembelian dapat dilakukan secara offline atau melalui <a href='https://tiktokshopbytokopedia.olshopku.com' target='_blank'>SHOP TOKOPEDIA kami</a>.",
            logoUrl: "https://img.ws.mms.shopee.co.id/a763bb88d328247910a59170a4090a5b",
            tokopediaLinkHeader: "https://tiktokshopbytokopedia.olshopku.com",
            
            // Catalog
            catalogTitle: "Katalog Barang HP",
            countText: "Menampilkan {count} Produk Tersedia",
            
            // Filter brands - DIPERBAIKI
            brands: ["Semua Merek", "iPhone", "Samsung", "Xiaomi", "Oppo", "Vivo", "Realme", "Infinix"],
            
            // Footer - WA diubah ke 6285977651240
            footerBrand: "SINAR MUTIARA CELL",
            footerCopyright: "© 2023 SINAR MUTIARA CELL - Katalog Barang HP",
            footerContact: "Hubungi kami: <a href='tel:+6285977651240'>085977651240</a>",
            footerWhatsApp: "https://wa.me/6285977651240",
            whatsappText: "Chat via WhatsApp",
            footerPhone: "085977651240",
            
            // Social links
            socialText: "Follow kami:",
            instagramLink: "#",
            facebookLink: "#",
            storeLink: "https://tiktokshopbytokopedia.olshopku.com",
            
            // WhatsApp number untuk produk - DIUBAH menjadi 6285977651240
            whatsappNumber: "6285977651240",
            whatsappMessageTemplate: "Halo SINAR MUTIARA CELL, saya ingin membeli produk: {product}",
            
            // Tokopedia link untuk produk
            tokopediaLink: "https://tiktokshopbytokopedia.olshopku.com"
        };

        // Data produk lengkap - DIPERBARUI dengan produk tambahan
        let products = [
            {
                type: "Tablet - Samsung",
                name: "Samsung Tab A 7 Inch 2016 1,5/8",
                stock: "1 unit",
                price: "Rp. 400.000",
                merk: "Samsung",
                storage: "8GB",
                image: "tablet"
            },
            {
                type: "Handphone - Samsung",
                name: "Samsung S8 4/64",
                stock: "1 unit",
                price: "Rp. 375.000",
                merk: "Samsung",
                storage: "64GB",
                image: "samsung"
            },
            // PRODUK BARU DITAMBAHKAN DI BAWAH INI
            {
                type: "iPhone - Apple",
                name: "Iphone 13 128Gb iBox Pink",
                stock: "Ready",
                price: "Rp4.750.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iphone 11 64gb iBox",
                stock: "Ready",
                price: "Rp2.150.000",
                merk: "Apple",
                storage: "64GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 15 plus 128Gb iBox",
                stock: "Ready",
                price: "Rp7.700.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "Ready iphone 14 pro max 128gb iBox",
                stock: "Ready",
                price: "Rp7.550.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 12 128Gb Black iBox",
                stock: "Ready",
                price: "Rp3.850.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 12 Pro 256GB Gold",
                stock: "Ready",
                price: "Rp5.450.000",
                merk: "Apple",
                storage: "256GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "Iphone 12 128GB White iBox",
                stock: "Ready",
                price: "Rp3.950.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 15 Pro 128GB",
                stock: "Ready",
                price: "Rp8.200.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 15 Pro 512GB",
                stock: "Ready",
                price: "Rp13.400.000",
                merk: "Apple",
                storage: "512GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iphone 14 pro max 256gb iBox",
                stock: "Ready",
                price: "Rp8.600.000",
                merk: "Apple",
                storage: "256GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 12 64GB Green iBox",
                stock: "Ready",
                price: "Rp3.200.000",
                merk: "Apple",
                storage: "64GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 13 Pro 128GB iBox(Gold)",
                stock: "Ready",
                price: "Rp5.750.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 14 Pro 128GB iBox",
                stock: "Ready",
                price: "Rp6.000.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 14 128GB iBox",
                stock: "Ready",
                price: "Rp5.300.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "Samsung - Foldable",
                name: "Samsung Z Fold 6 12/256GB SEIN",
                stock: "Ready",
                price: "Rp13.100.000",
                merk: "Samsung",
                storage: "256GB",
                image: "samsung"
            },
            {
                type: "Samsung - Flagship",
                name: "SAMSUNG S24 128GB SEIN",
                stock: "Ready",
                price: "Rp6.100.000",
                merk: "Samsung",
                storage: "128GB",
                image: "samsung"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 16 ProMax 256GB iBox",
                stock: "Ready",
                price: "Rp16.800.000",
                merk: "Apple",
                storage: "256GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 16 128gb Black iBox",
                stock: "Ready",
                price: "Rp12.255.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 12 128GB",
                stock: "Ready",
                price: "Rp3.750.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 12 mini 128Gb",
                stock: "Ready",
                price: "Rp3.200.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "IPhone Xr 64GB",
                stock: "Ready",
                price: "Rp1.200.000",
                merk: "Apple",
                storage: "64GB",
                image: "iphone"
            },
            {
                type: "Samsung - Entry",
                name: "SAMSUNG A05S 6/128 GB",
                stock: "Ready",
                price: "Rp950.000",
                merk: "Samsung",
                storage: "128GB",
                image: "samsung"
            },
            {
                type: "Xiaomi - Redmi",
                name: "Xiaomi Redmi 13 8/128GB",
                stock: "Ready",
                price: "Rp900.000",
                merk: "Xiaomi",
                storage: "128GB",
                image: "xiaomi"
            },
            {
                type: "iPhone - Apple",
                name: "iphone 11 128GB iBox",
                stock: "Ready",
                price: "Rp2.300.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "IPHONE 11 128GB IBOX",
                stock: "Ready",
                price: "Rp2.500.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 11 128Gb iBox",
                stock: "Ready",
                price: "Rp2.500.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 13 128GB RED",
                stock: "Ready",
                price: "Rp4.600.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 13 128GB iBox (green)",
                stock: "Ready",
                price: "Rp4.600.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 11 Pro Max 128GB iBox",
                stock: "Ready",
                price: "Rp3.150.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone 12 64GB Blue iBox",
                stock: "Ready",
                price: "Rp3.050.000",
                merk: "Apple",
                storage: "64GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone Xs 256 GB Gold",
                stock: "Ready",
                price: "Rp1.700.000",
                merk: "Apple",
                storage: "256GB",
                image: "iphone"
            },
            {
                type: "iPhone - Apple",
                name: "iPhone XR 128gb",
                stock: "Ready",
                price: "Rp1.650.000",
                merk: "Apple",
                storage: "128GB",
                image: "iphone"
            },
            {
                type: "Xiaomi - Redmi",
                name: "REDMI NOTE 14 PRO 5G",
                stock: "Ready",
                price: "Rp750.000",
                merk: "Xiaomi",
                storage: "128GB+",
                image: "xiaomi"
            },
            {
                type: "Realme - Entry",
                name: "REALME NOTE 60x",
                stock: "Ready",
                price: "Rp550.000",
                merk: "Realme",
                storage: "64GB+",
                image: "realme"
            },
            {
                type: "Samsung - Mid Range",
                name: "SAMSUNG GALAXY A56 5G",
                stock: "Ready",
                price: "Rp1.450.000",
                merk: "Samsung",
                storage: "128GB+",
                image: "samsung"
            },
            {
                type: "Tecno - Mid Range",
                name: "TECNO CAMON 40 PRO 5G",
                stock: "Ready",
                price: "Rp1.200.000",
                merk: "Infinix",
                storage: "128GB+",
                image: "infinix"
            },
            {
                type: "Samsung - Entry 5G",
                name: "SAMSUNG GALAXY A06 5G",
                stock: "Ready",
                price: "Rp957.000",
                merk: "Samsung",
                storage: "64GB+",
                image: "samsung"
            },
            {
                type: "Vivo - Mid Range",
                name: "VIVO V60 5G",
                stock: "Ready",
                price: "Rp2.900.000",
                merk: "Vivo",
                storage: "128GB+",
                image: "vivo"
            },
            {
                type: "iPhone - Apple",
                name: "IPHONE 13 PRO 256GB INTER",
                stock: "Ready",
                price: "Rp3.500.000",
                merk: "Apple",
                storage: "256GB",
                image: "iphone"
            },
            {
                type: "Infinix - Entry",
                name: "INFINIX NOTE 30",
                stock: "Ready",
                price: "Rp550.000",
                merk: "Infinix",
                storage: "64GB+",
                image: "infinix"
            },
            {
                type: "Realme - Entry",
                name: "REALME C75",
                stock: "Ready",
                price: "Rp950.000",
                merk: "Realme",
                storage: "128GB+",
                image: "realme"
            },
            {
                type: "iPhone - Apple",
                name: "IPHONE 13 PRO 256GB IBOX",
                stock: "Ready",
                price: "Rp6.650.000",
                merk: "Apple",
                storage: "256GB",
                image: "iphone"
            }
        ];

        // Konfigurasi admin - DIUBAH username dan password
        const ADMIN_CREDENTIALS = {
            username: "sinarmutiara_cell",
            password: "bahagiaselalu88"
        };

        // Status sistem
        let isLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
        let isEditMode = false;
        let editedProducts = new Map();
        let currentEditElement = null;

        // Variabel global lainnya
        let currentPage = 1;
        let itemsPerPage = 50;
        let filteredProducts = [...products];
        let currentBrandFilter = 'all';
        let currentSearchQuery = '';

        // ==================== FUNGSI LOGIN ====================
        function showLogin() {
            if (isLoggedIn) {
                toggleEditMode();
            } else {
                document.getElementById('loginModal').style.display = 'flex';
                document.getElementById('loginError').style.display = 'none';
                document.getElementById('username').focus();
            }
        }

        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
                isLoggedIn = true;
                localStorage.setItem('adminLoggedIn', 'true');
                localStorage.setItem('adminUsername', username);
                
                document.getElementById('loginModal').style.display = 'none';
                showAdminBar();
                updatePencilButton();
                alert('Login berhasil! Mode admin aktif.');
            } else {
                document.getElementById('loginError').style.display = 'block';
                document.getElementById('password').value = '';
                document.getElementById('password').focus();
            }
        }

        function logout() {
            if (confirm('Apakah Anda yakin ingin logout?')) {
                isLoggedIn = false;
                isEditMode = false;
                localStorage.removeItem('adminLoggedIn');
                localStorage.removeItem('adminUsername');
                
                hideAdminBar();
                exitEditMode();
                updatePencilButton();
                alert('Logout berhasil.');
            }
        }

        function showAdminBar() {
            document.getElementById('adminBar').style.display = 'flex';
            document.getElementById('adminUsername').textContent = localStorage.getItem('adminUsername');
        }

        function hideAdminBar() {
            document.getElementById('adminBar').style.display = 'none';
        }

        // Update tombol pensil
        function updatePencilButton() {
            const pencilBtn = document.getElementById('editTogglePencil');
            if (isLoggedIn) {
                if (isEditMode) {
                    pencilBtn.innerHTML = '✎<span style="font-size: 0.7rem; margin-left: 5px;">ON</span>';
                    pencilBtn.style.color = "#27ae60";
                    pencilBtn.title = "Edit Mode: ON - Klik untuk nonaktifkan";
                } else {
                    pencilBtn.innerHTML = '✎<span style="font-size: 0.7rem; margin-left: 5px;">OFF</span>';
                    pencilBtn.style.color = "#f39c12";
                    pencilBtn.title = "Edit Mode: OFF - Klik untuk aktifkan";
                }
            } else {
                pencilBtn.innerHTML = '✎';
                pencilBtn.style.color = "#f39c12";
                pencilBtn.title = "Klik untuk login dan edit";
            }
        }

        // ==================== EDIT MODE ====================
        function toggleEditMode() {
            if (!isLoggedIn) {
                showLogin();
                return;
            }
            
            isEditMode = !isEditMode;
            
            if (isEditMode) {
                enterEditMode();
            } else {
                exitEditMode();
            }
            
            document.getElementById('editModeStatus').textContent = isEditMode ? 'ON' : 'OFF';
            updatePencilButton();
        }

        function enterEditMode() {
            document.getElementById('tableSection').classList.add('edit-mode');
            document.getElementById('editControls').style.display = 'flex';
            document.getElementById('siteHeader').classList.add('editable');
            document.getElementById('siteFooter').classList.add('editable');
            document.getElementById('siteLogo').classList.add('editable');
            renderProductTable();
            highlightEditableElements();
        }

        function exitEditMode() {
            document.getElementById('tableSection').classList.remove('edit-mode');
            document.getElementById('editControls').style.display = 'none';
            document.getElementById('siteHeader').classList.remove('editable');
            document.getElementById('siteFooter').classList.remove('editable');
            document.getElementById('siteLogo').classList.remove('editable');
            editedProducts.clear();
            renderProductTable();
            removeEditableHighlights();
        }

        function highlightEditableElements() {
            const elements = document.querySelectorAll('.editable, [id^="footer"], [id^="site"], .action-btn, .filter-btn, .page-btn');
            elements.forEach(el => {
                if (!el.classList.contains('admin-btn') && !el.classList.contains('edit-toggle-pencil')) {
                    el.classList.add('editable-highlight');
                }
            });
        }

        function removeEditableHighlights() {
            const elements = document.querySelectorAll('.editable-highlight');
            elements.forEach(el => {
                el.classList.remove('editable-highlight');
            });
        }

        // ==================== EDIT MODAL ====================
        function showEditModal(title, fields, onSave) {
            const modal = document.getElementById('editModal');
            const content = document.getElementById('editModalContent');
            
            let html = `<h3>${title}</h3>`;
            
            fields.forEach(field => {
                html += `
                    <label>${field.label}</label>
                    ${field.type === 'textarea' ? 
                        `<textarea id="editField_${field.id}" ${field.rows ? `rows="${field.rows}"` : ''}>${field.value || ''}</textarea>` :
                      field.type === 'select' ?
                        `<select id="editField_${field.id}">
                            ${field.options.map(opt => `<option value="${opt.value}" ${opt.value === field.value ? 'selected' : ''}>${opt.label}</option>`).join('')}
                        </select>` :
                        `<input type="${field.type}" id="editField_${field.id}" value="${field.value || ''}" placeholder="${field.placeholder || ''}">`
                    }
                `;
            });
            
            html += `
                <div class="edit-modal-buttons">
                    <button class="save-modal-btn" onclick="saveModalChanges()">Simpan</button>
                    <button class="cancel-modal-btn" onclick="closeEditModal()">Batal</button>
                </div>
            `;
            
            content.innerHTML = html;
            modal.style.display = 'flex';
            currentEditElement = {callback: onSave, fields: fields};
        }

        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
            currentEditElement = null;
        }

        function saveModalChanges() {
            if (!currentEditElement) return;
            
            const values = {};
            const inputs = document.querySelectorAll('#editModalContent [id^="editField_"]');
            
            inputs.forEach(input => {
                const id = input.id.replace('editField_', '');
                values[id] = input.value;
            });
            
            currentEditElement.callback(values);
            closeEditModal();
        }

        // ==================== EDIT HEADER ====================
        function editHeader() {
            if (!isEditMode) return;
            
            const fields = [
                { id: 'title', label: 'Judul Website', type: 'text', value: pageData.title },
                { id: 'tagline', label: 'Tagline', type: 'text', value: pageData.tagline },
                { id: 'description', label: 'Deskripsi Header', type: 'textarea', value: pageData.description, rows: 3 },
                { id: 'logoUrl', label: 'URL Logo', type: 'text', value: pageData.logoUrl },
                { id: 'tokopediaLinkHeader', label: 'Link Tokopedia di Header', type: 'text', value: pageData.tokopediaLinkHeader }
            ];
            
            showEditModal('Edit Header Website', fields, saveHeaderChanges);
        }

        function saveHeaderChanges(values) {
            // Update pageData
            pageData.title = values.title;
            pageData.tagline = values.tagline;
            pageData.description = values.description;
            pageData.logoUrl = values.logoUrl;
            pageData.tokopediaLinkHeader = values.tokopediaLinkHeader;
            
            // Update DOM
            document.getElementById('siteTitle').textContent = values.title;
            document.getElementById('siteTagline').textContent = values.tagline;
            document.getElementById('headerDescription').innerHTML = values.description;
            
            // Update logo
            const logoImg = document.querySelector('#siteLogo img');
            if (logoImg) {
                logoImg.src = values.logoUrl;
            }
            
            // Update footer logo juga
            const footerLogoImg = document.querySelector('.footer-logo .logo-small img');
            if (footerLogoImg) {
                footerLogoImg.src = values.logoUrl;
            }
            
            // Save to localStorage
            savePageData();
            alert('Header berhasil diperbarui!');
        }

        function editLogo(event) {
            if (!isEditMode) return;
            event.stopPropagation();
            
            const fields = [
                { id: 'logoUrl', label: 'URL Logo Baru', type: 'text', value: pageData.logoUrl },
                { id: 'iconType', label: 'Tipe Ikon', type: 'select', value: 'image', options: [
                    { value: 'image', label: 'Gambar' },
                    { value: 'icon', label: 'Ikon FontAwesome' }
                ]},
                { id: 'iconName', label: 'Nama Ikon FontAwesome', type: 'text', value: 'fas fa-store', placeholder: 'contoh: fas fa-store' }
            ];
            
            showEditModal('Edit Logo', fields, saveLogoChanges);
        }

        function saveLogoChanges(values) {
            pageData.logoUrl = values.logoUrl;
            const logo = document.getElementById('siteLogo');
            const footerLogo = document.querySelector('.footer-logo .logo-small');
            
            if (values.iconType === 'image') {
                logo.innerHTML = `<img src="${values.logoUrl}" alt="${pageData.title} Logo">`;
                if (footerLogo) {
                    footerLogo.innerHTML = `<img src="${values.logoUrl}" alt="${pageData.title} Logo">`;
                }
            } else {
                logo.innerHTML = `<i class="${values.iconName}"></i>`;
                if (footerLogo) {
                    footerLogo.innerHTML = `<i class="${values.iconName}"></i>`;
                }
            }
            
            savePageData();
            alert('Logo berhasil diperbarui!');
        }

        // ==================== EDIT CATALOG ====================
        function editCatalog() {
            if (!isEditMode) return;
            
            const fields = [
                { id: 'catalogTitle', label: 'Judul Katalog', type: 'text', value: pageData.catalogTitle },
                { id: 'countText', label: 'Teks Jumlah Produk', type: 'text', value: pageData.countText },
                { id: 'whatsappNumber', label: 'Nomor WhatsApp', type: 'text', value: pageData.whatsappNumber },
                { id: 'tokopediaLink', label: 'Link Tokopedia', type: 'text', value: pageData.tokopediaLink },
                { id: 'whatsappMessageTemplate', label: 'Template Pesan WhatsApp', type: 'textarea', value: pageData.whatsappMessageTemplate, rows: 3 }
            ];
            
            showEditModal('Edit Katalog', fields, saveCatalogChanges);
        }

        function saveCatalogChanges(values) {
            pageData.catalogTitle = values.catalogTitle;
            pageData.countText = values.countText;
            pageData.whatsappNumber = values.whatsappNumber;
            pageData.tokopediaLink = values.tokopediaLink;
            pageData.whatsappMessageTemplate = values.whatsappMessageTemplate;
            
            document.getElementById('catalogTitle').textContent = values.catalogTitle;
            updateDisplayCount();
            
            savePageData();
            renderProductTable(); // Untuk update link WhatsApp
            alert('Katalog berhasil diperbarui!');
        }

        // ==================== EDIT FILTER ====================
        function editFilter(event) {
            if (!isEditMode) return;
            event.stopPropagation();
            
            const brandButtons = document.querySelectorAll('.filter-btn');
            const fields = [
                { id: 'brandCount', label: 'Jumlah Merek', type: 'number', value: brandButtons.length.toString() }
            ];
            
            brandButtons.forEach((btn, index) => {
                fields.push({
                    id: `brand_${index}`,
                    label: `Nama Merek ${index + 1}`,
                    type: 'text',
                    value: btn.textContent
                });
            });
            
            showEditModal('Edit Filter Merek', fields, saveFilterChanges);
        }

        function saveFilterChanges(values) {
            const brandCount = parseInt(values.brandCount);
            const filterContainer = document.getElementById('filterBrand');
            
            // Clear existing buttons
            filterContainer.innerHTML = '';
            
            // Create new buttons
            for (let i = 0; i < brandCount; i++) {
                const brandName = values[`brand_${i}`] || `Merek ${i + 1}`;
                let brandId;
                
                // Tentukan ID berdasarkan nama merek
                if (i === 0) {
                    brandId = 'all';
                } else {
                    brandId = brandName.toLowerCase().replace(/\s+/g, '');
                }
                
                const button = document.createElement('button');
                button.className = `filter-btn ${i === 0 ? 'active' : ''}`;
                button.dataset.brand = brandId;
                button.textContent = brandName;
                button.onclick = () => filterByBrand(brandId);
                
                filterContainer.appendChild(button);
            }
            
            // Update pageData
            pageData.brands = Array.from(filterContainer.children).map(btn => btn.textContent);
            savePageData();
            
            // Reset filter ke "Semua Merek"
            currentBrandFilter = 'all';
            updateFilteredProducts();
            renderProductTable();
            updatePagination();
            updateActiveFilterButton();
            
            alert('Filter merek berhasil diperbarui!');
        }

        // ==================== EDIT FOOTER ====================
        function editFooter() {
            if (!isEditMode) return;
            
            const fields = [
                { id: 'footerBrand', label: 'Nama Brand Footer', type: 'text', value: pageData.footerBrand },
                { id: 'footerCopyright', label: 'Teks Copyright', type: 'text', value: pageData.footerCopyright },
                { id: 'footerPhone', label: 'Nomor Telepon', type: 'text', value: pageData.footerPhone },
                { id: 'footerWhatsApp', label: 'Link WhatsApp', type: 'text', value: pageData.footerWhatsApp },
                { id: 'whatsappText', label: 'Teks Tombol WhatsApp', type: 'text', value: pageData.whatsappText },
                { id: 'instagramLink', label: 'Link Instagram', type: 'text', value: pageData.instagramLink },
                { id: 'facebookLink', label: 'Link Facebook', type: 'text', value: pageData.facebookLink },
                { id: 'storeLink', label: 'Link Toko', type: 'text', value: pageData.storeLink }
            ];
            
            showEditModal('Edit Footer', fields, saveFooterChanges);
        }

        function saveFooterChanges(values) {
            // Update pageData
            Object.keys(values).forEach(key => {
                if (pageData.hasOwnProperty(key)) {
                    pageData[key] = values[key];
                }
            });
            
            // Update DOM
            document.getElementById('footerBrand').textContent = values.footerBrand;
            document.getElementById('footerCopyright').textContent = values.footerCopyright;
            document.getElementById('footerContact').innerHTML = `Hubungi kami: <a href="tel:${values.footerPhone}">${values.footerPhone}</a>`;
            document.getElementById('footerPhone').textContent = values.footerPhone;
            document.getElementById('footerPhone').href = `tel:${values.footerPhone}`;
            document.getElementById('footerWhatsApp').href = values.footerWhatsApp;
            document.getElementById('whatsappText').textContent = values.whatsappText;
            document.getElementById('instagramLink').href = values.instagramLink;
            document.getElementById('facebookLink').href = values.facebookLink;
            document.getElementById('storeLink').href = values.storeLink;
            
            savePageData();
            alert('Footer berhasil diperbarui!');
        }

        // ==================== EDIT PRODUCTS ====================
        function addNewProduct() {
            if (!isEditMode) return;
            
            const newProduct = {
                type: "Produk Baru",
                name: "Nama Produk",
                stock: "1 unit",
                price: "Rp. 0",
                merk: "Samsung",
                storage: "Storage",
                image: "default"
            };
            
            products.unshift(newProduct);
            filteredProducts = [...products];
            editedProducts.set(0, newProduct);
            
            currentPage = 1;
            updateFilteredProducts();
            renderProductTable();
            updatePagination();
            alert('Produk baru berhasil ditambahkan! Silakan edit detail produk.');
        }

        function handleEdit(productIndex, field, value) {
            if (!isEditMode) return;
            
            if (!editedProducts.has(productIndex)) {
                editedProducts.set(productIndex, {});
            }
            
            const productUpdates = editedProducts.get(productIndex);
            productUpdates[field] = value;
            editedProducts.set(productIndex, productUpdates);
        }

        function saveProductChanges(productIndex) {
            if (!isEditMode || !editedProducts.has(productIndex)) return;
            
            const updatedProduct = editedProducts.get(productIndex);
            products[productIndex] = {...products[productIndex], ...updatedProduct};
            editedProducts.delete(productIndex);
            
            saveProductsData();
            renderProductTable();
            alert('Perubahan produk berhasil disimpan!');
        }

        // ==================== SAVE ALL ====================
        function saveAllChanges() {
            if (!isEditMode) return;
            
            let hasChanges = false;
            
            // Save product changes
            if (editedProducts.size > 0) {
                editedProducts.forEach((updatedProduct, index) => {
                    products[index] = {...products[index], ...updatedProduct};
                });
                editedProducts.clear();
                hasChanges = true;
            }
            
            // Save all data
            if (hasChanges) {
                saveProductsData();
                savePageData();
                renderProductTable();
                alert('Semua perubahan berhasil disimpan!');
            } else {
                alert('Tidak ada perubahan yang perlu disimpan.');
            }
        }

        // ==================== DATA PERSISTENCE ====================
        function savePageData() {
            localStorage.setItem('pageData', JSON.stringify(pageData));
        }

        function saveProductsData() {
            localStorage.setItem('productsData', JSON.stringify(products));
        }

        function loadSavedData() {
            // Load page data
            const savedPageData = localStorage.getItem('pageData');
            if (savedPageData) {
                try {
                    const parsedData = JSON.parse(savedPageData);
                    Object.assign(pageData, parsedData);
                    applyPageData();
                } catch(e) {
                    console.error('Error loading page data:', e);
                }
            }
            
            // Load products
            const savedProducts = localStorage.getItem('productsData');
            if (savedProducts) {
                try {
                    products = JSON.parse(savedProducts);
                    filteredProducts = [...products];
                } catch(e) {
                    console.error('Error loading products data:', e);
                }
            }
        }

        function applyPageData() {
            // Apply page data to DOM
            document.getElementById('siteTitle').textContent = pageData.title;
            document.getElementById('siteTagline').textContent = pageData.tagline;
            document.getElementById('headerDescription').innerHTML = pageData.description;
            document.getElementById('catalogTitle').textContent = pageData.catalogTitle;
            document.getElementById('footerBrand').textContent = pageData.footerBrand;
            document.getElementById('footerCopyright').textContent = pageData.footerCopyright;
            document.getElementById('whatsappText').textContent = pageData.whatsappText;
            
            // Update logo
            const logoImg = document.querySelector('#siteLogo img');
            if (logoImg) {
                logoImg.src = pageData.logoUrl;
            }
            
            // Update footer logo
            const footerLogoImg = document.querySelector('.footer-logo .logo-small img');
            if (footerLogoImg) {
                footerLogoImg.src = pageData.logoUrl;
            }
            
            // Update footer links
            document.getElementById('footerWhatsApp').href = pageData.footerWhatsApp;
            document.getElementById('instagramLink').href = pageData.instagramLink;
            document.getElementById('facebookLink').href = pageData.facebookLink;
            document.getElementById('storeLink').href = pageData.storeLink;
            
            // Update filter buttons
            const filterContainer = document.getElementById('filterBrand');
            filterContainer.innerHTML = '';
            pageData.brands.forEach((brand, index) => {
                let brandId;
                
                if (index === 0) {
                    brandId = 'all';
                } else {
                    brandId = brand.toLowerCase().replace(/\s+/g, '');
                }
                
                const button = document.createElement('button');
                button.className = `filter-btn ${index === 0 ? 'active' : ''}`;
                button.dataset.brand = brandId;
                button.textContent = brand;
                button.onclick = () => filterByBrand(brandId);
                filterContainer.appendChild(button);
            });
        }

        // ==================== PRODUCT RENDERING ====================
        function getProductIcon(imageType) {
            switch(imageType) {
                case 'iphone': return '<i class="fab fa-apple"></i>';
                case 'samsung': return '<i class="fas fa-mobile-alt"></i>';
                case 'vivo': return '<i class="fas fa-phone"></i>';
                case 'oppo': return '<i class="fas fa-mobile"></i>';
                case 'xiaomi': return '<i class="fas fa-mobile-alt"></i>';
                case 'tablet': return '<i class="fas fa-tablet-alt"></i>';
                case 'asus': return '<i class="fas fa-laptop"></i>';
                case 'infinix': return '<i class="fas fa-mobile-alt"></i>';
                case 'realme': return '<i class="fas fa-bolt"></i>';
                default: return '<i class="fas fa-mobile-alt"></i>';
            }
        }

        function renderProductTable() {
            const tableBody = document.getElementById('product-table');
            tableBody.innerHTML = '';
            
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const productsToShow = filteredProducts.slice(startIndex, endIndex);
            
            if (productsToShow.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="3" style="text-align: center; padding: 40px;">
                            <i class="fas fa-search" style="font-size: 3rem; color: #ddd; margin-bottom: 15px;"></i>
                            <p style="color: #7f8c8d;">Tidak ada produk yang ditemukan</p>
                            ${isEditMode ? '<p><small>Tip: Coba ubah filter atau pencarian</small></p>' : ''}
                        </td>
                    </tr>
                `;
                return;
            }
            
            productsToShow.forEach((product, index) => {
                const row = document.createElement('tr');
                const actualIndex = products.indexOf(product);
                const isBeingEdited = editedProducts.has(actualIndex);
                
                // Create WhatsApp message - menggunakan nomor baru 6285977651240
                const whatsappMessage = pageData.whatsappMessageTemplate
                    .replace('{product}', `${product.type} - ${product.name} (${product.price})`);
                const whatsappLink = `https://wa.me/${pageData.whatsappNumber}?text=${encodeURIComponent(whatsappMessage)}`;
                
                // Tokopedia link
                const tokopediaLink = pageData.tokopediaLink;
                
                if (isEditMode) {
                    // Edit mode
                    row.innerHTML = `
                        <td>
                            <div class="product-info">
                                <div class="product-image editable" onclick="editProductIcon(${actualIndex})">
                                    ${getProductIcon(product.image)}
                                </div>
                                <div class="product-details">
                                    <select class="edit-input" onchange="handleEdit(${actualIndex}, 'type', this.value)" style="margin-bottom: 5px;">
                                        <option value="iPhone - Apple" ${product.type === 'iPhone - Apple' ? 'selected' : ''}>iPhone - Apple</option>
                                        <option value="Samsung - Flagship" ${product.type === 'Samsung - Flagship' ? 'selected' : ''}>Samsung - Flagship</option>
                                        <option value="Samsung - Foldable" ${product.type === 'Samsung - Foldable' ? 'selected' : ''}>Samsung - Foldable</option>
                                        <option value="Samsung - Mid Range" ${product.type === 'Samsung - Mid Range' ? 'selected' : ''}>Samsung - Mid Range</option>
                                        <option value="Samsung - Entry" ${product.type === 'Samsung - Entry' ? 'selected' : ''}>Samsung - Entry</option>
                                        <option value="Tablet - Samsung" ${product.type === 'Tablet - Samsung' ? 'selected' : ''}>Tablet - Samsung</option>
                                        <option value="Handphone - Samsung" ${product.type === 'Handphone - Samsung' ? 'selected' : ''}>Handphone - Samsung</option>
                                        <option value="Xiaomi - Redmi" ${product.type === 'Xiaomi - Redmi' ? 'selected' : ''}>Xiaomi - Redmi</option>
                                        <option value="Vivo - Mid Range" ${product.type === 'Vivo - Mid Range' ? 'selected' : ''}>Vivo - Mid Range</option>
                                        <option value="Realme - Entry" ${product.type === 'Realme - Entry' ? 'selected' : ''}>Realme - Entry</option>
                                        <option value="Tecno - Mid Range" ${product.type === 'Tecno - Mid Range' ? 'selected' : ''}>Tecno - Mid Range</option>
                                        <option value="Infinix - Entry" ${product.type === 'Infinix - Entry' ? 'selected' : ''}>Infinix - Entry</option>
                                        <option value="Produk Baru" ${product.type === 'Produk Baru' ? 'selected' : ''}>Produk Baru</option>
                                    </select>
                                    <input type="text" class="edit-input" value="${product.name}" oninput="handleEdit(${actualIndex}, 'name', this.value)" placeholder="Nama produk" style="margin-bottom: 5px;">
                                    <div style="display: flex; gap: 5px;">
                                        <input type="text" class="edit-input-small" value="${product.storage}" oninput="handleEdit(${actualIndex}, 'storage', this.value)" placeholder="Storage" style="flex: 1;">
                                        <input type="text" class="edit-input-small" value="${product.stock}" oninput="handleEdit(${actualIndex}, 'stock', this.value)" placeholder="Stok" style="flex: 1;">
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <input type="text" class="edit-input" value="${product.price}" oninput="handleEdit(${actualIndex}, 'price', this.value)" placeholder="Harga">
                            <select class="edit-input" onchange="handleEdit(${actualIndex}, 'merk', this.value)" style="margin-top: 5px;">
                                <option value="Samsung" ${product.merk === 'Samsung' ? 'selected' : ''}>Samsung</option>
                                <option value="Apple" ${product.merk === 'Apple' ? 'selected' : ''}>Apple</option>
                                <option value="Xiaomi" ${product.merk === 'Xiaomi' ? 'selected' : ''}>Xiaomi</option>
                                <option value="Oppo" ${product.merk === 'Oppo' ? 'selected' : ''}>Oppo</option>
                                <option value="Vivo" ${product.merk === 'Vivo' ? 'selected' : ''}>Vivo</option>
                                <option value="Realme" ${product.merk === 'Realme' ? 'selected' : ''}>Realme</option>
                                <option value="Infinix" ${product.merk === 'Infinix' ? 'selected' : ''}>Infinix</option>
                            </select>
                        </td>
                        <td>
                            <div class="action-buttons">
                                <div style="margin-bottom: 5px;">
                                    <small>WA: <input type="text" class="edit-input-small" value="${pageData.whatsappNumber}" oninput="pageData.whatsappNumber = this.value; savePageData();" placeholder="Nomor WA"></small>
                                </div>
                                <div style="margin-bottom: 5px;">
                                    <small>Link: <input type="text" class="edit-input-small" value="${pageData.tokopediaLink}" oninput="pageData.tokopediaLink = this.value; savePageData();" placeholder="Link Tokopedia"></small>
                                </div>
                                <button class="save-btn" onclick="saveProductChanges(${actualIndex})"><i class="fas fa-check"></i> Simpan</button>
                            </div>
                        </td>
                    `;
                } else {
                    // Normal mode
                    row.innerHTML = `
                        <td>
                            <div class="product-info">
                                <div class="product-image">
                                    ${getProductIcon(product.image)}
                                </div>
                                <div class="product-details">
                                    <div class="product-name">
                                        ${product.type.includes('Apple') ? '<span style="color:#333;background:#f0f0f0;padding:2px 8px;border-radius:4px;margin-right:8px;"><i class="fab fa-apple"></i></span>' : ''}
                                        ${product.type}
                                    </div>
                                    <div class="product-spec">${product.name} | ${product.storage} | ${product.stock}</div>
                                </div>
                            </div>
                        </td>
                        <td>Dimulai dari harga <span class="price">${product.price}</span></td>
                        <td>
                            <div class="action-buttons">
                                <a href="${whatsappLink}" class="action-btn whatsapp-btn" target="_blank">
                                    <i class="fab fa-whatsapp"></i> WhatsApp
                                </a>
                                <a href="${tokopediaLink}" class="action-btn tokopedia-btn" target="_blank">
                                    <i class="fas fa-store"></i> Tokopedia
                                </a>
                            </div>
                        </td>
                    `;
                }
                tableBody.appendChild(row);
            });
            
            updatePageInfo();
            updateDisplayCount();
        }

        function editProductIcon(productIndex) {
            if (!isEditMode) return;
            
            const product = products[productIndex];
            const fields = [
                { id: 'imageType', label: 'Tipe Ikon Produk', type: 'select', value: product.image, options: [
                    { value: 'iphone', label: 'iPhone (Apple)' },
                    { value: 'samsung', label: 'Samsung' },
                    { value: 'vivo', label: 'Vivo' },
                    { value: 'oppo', label: 'Oppo' },
                    { value: 'xiaomi', label: 'Xiaomi' },
                    { value: 'tablet', label: 'Tablet' },
                    { value: 'infinix', label: 'Infinix' },
                    { value: 'realme', label: 'Realme' },
                    { value: 'default', label: 'Default' }
                ]}
            ];
            
            showEditModal('Edit Ikon Produk', fields, (values) => {
                handleEdit(productIndex, 'image', values.imageType);
                renderProductTable();
            });
        }

        // ==================== FILTER & SEARCH ====================
        function filterByBrand(brand) {
            // Update active filter button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.brand === brand) {
                    btn.classList.add('active');
                }
            });
            
            currentBrandFilter = brand;
            currentPage = 1; // Reset ke halaman 1 saat filter berubah
            updateFilteredProducts();
            renderProductTable();
            updatePagination();
        }

        function searchProducts(query) {
            currentSearchQuery = query.toLowerCase();
            currentPage = 1; // Reset ke halaman 1 saat search berubah
            updateFilteredProducts();
            renderProductTable();
            updatePagination();
        }

        function updateFilteredProducts() {
            filteredProducts = products.filter(product => {
                // Filter berdasarkan merek
                let brandMatch = true;
                if (currentBrandFilter !== 'all') {
                    if (currentBrandFilter === 'iphone') {
                        brandMatch = product.type.toLowerCase().includes('iphone') || product.merk.toLowerCase() === 'apple';
                    } else {
                        brandMatch = product.merk.toLowerCase() === currentBrandFilter;
                    }
                }
                
                // Filter berdasarkan pencarian
                let searchMatch = true;
                if (currentSearchQuery) {
                    searchMatch = 
                        product.name.toLowerCase().includes(currentSearchQuery) ||
                        product.type.toLowerCase().includes(currentSearchQuery) ||
                        product.storage.toLowerCase().includes(currentSearchQuery) ||
                        product.price.toLowerCase().includes(currentSearchQuery) ||
                        product.merk.toLowerCase().includes(currentSearchQuery);
                }
                
                return brandMatch && searchMatch;
            });
        }

        function updateActiveFilterButton() {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.brand === currentBrandFilter) {
                    btn.classList.add('active');
                }
            });
        }

        // ==================== PAGINATION ====================
        function updateDisplayCount() {
            const count = filteredProducts.length;
            document.getElementById('display-count').textContent = count;
            document.getElementById('countText').textContent = pageData.countText.replace('{count}', count);
        }

        function updatePageInfo() {
            const startIndex = (currentPage - 1) * itemsPerPage + 1;
            const endIndex = Math.min(currentPage * itemsPerPage, filteredProducts.length);
            const total = filteredProducts.length;
            
            document.getElementById('start').textContent = startIndex;
            document.getElementById('end').textContent = endIndex;
            document.getElementById('total').textContent = total;
            
            // Update text info
            document.getElementById('pageInfoText').textContent = 
                `Menampilkan ${startIndex} - ${endIndex} dari ${total} entri`;
        }

        function updatePagination() {
            const totalPages = Math.max(1, Math.ceil(filteredProducts.length / itemsPerPage));
            
            // Update tombol halaman
            for (let i = 1; i <= 5; i++) {
                const pageBtn = document.getElementById(`page-${i}`);
                if (pageBtn) {
                    if (i <= totalPages) {
                        pageBtn.textContent = i;
                        pageBtn.style.display = 'block';
                        pageBtn.classList.toggle('active', i === currentPage);
                        pageBtn.disabled = false;
                        pageBtn.onclick = () => goToPage(i);
                    } else {
                        pageBtn.style.display = 'none';
                    }
                }
            }
            
            // Update tombol navigasi
            const prevBtn = document.getElementById('prev-page');
            const nextBtn = document.getElementById('next-page');
            
            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages || totalPages === 0;
            
            // Update status aktif tombol
            updatePageInfo();
        }

        function goToPage(pageNumber) {
            if (pageNumber < 1) return;
            const totalPages = Math.max(1, Math.ceil(filteredProducts.length / itemsPerPage));
            if (pageNumber > totalPages) return;
            
            currentPage = pageNumber;
            renderProductTable();
            updatePagination();
            scrollToTop();
        }

        function goToPrevPage() {
            if (currentPage > 1) {
                goToPage(currentPage - 1);
            }
        }

        function goToNextPage() {
            const totalPages = Math.max(1, Math.ceil(filteredProducts.length / itemsPerPage));
            if (currentPage < totalPages) {
                goToPage(currentPage + 1);
            }
        }

        function scrollToTop() {
            window.scrollTo({
                top: document.querySelector('.table-section').offsetTop - 20,
                behavior: 'smooth'
            });
        }

        // ==================== INITIALIZATION ====================
        function checkLoginStatus() {
            if (isLoggedIn) {
                showAdminBar();
            }
            updatePencilButton();
        }

        function initEventListeners() {
            // Search input dengan debounce
            const searchInput = document.getElementById('search-input');
            let searchTimeout;
            searchInput.addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    searchProducts(e.target.value);
                }, 300);
            });
            
            // Enter di search input
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    searchProducts(e.target.value);
                }
            });
            
            // Entries select
            const entriesSelect = document.getElementById('show-entries-select');
            entriesSelect.addEventListener('change', (e) => {
                itemsPerPage = e.target.value === 'all' ? filteredProducts.length : parseInt(e.target.value);
                currentPage = 1;
                renderProductTable();
                updatePagination();
            });
            
            // Modal close dengan klik di luar
            document.getElementById('loginModal').addEventListener('click', (e) => {
                if (e.target.id === 'loginModal') {
                    document.getElementById('loginModal').style.display = 'none';
                }
            });
            
            document.getElementById('editModal').addEventListener('click', (e) => {
                if (e.target.id === 'editModal') {
                    closeEditModal();
                }
            });
            
            // Enter untuk login
            document.getElementById('username').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    document.getElementById('password').focus();
                }
            });
            
            document.getElementById('password').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') login();
            });
            
            // Edit catalog on title click
            document.getElementById('catalogTitle').addEventListener('click', (e) => {
                if (isEditMode) editCatalog();
            });
            
            // Edit filter section
            document.querySelector('.filter-brand').addEventListener('click', (e) => {
                if (isEditMode && e.target.classList.contains('filter-btn')) {
                    editFilter(e);
                }
            });
        }

        // ==================== MAIN INIT ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved data
            loadSavedData();
            
            // Check login status
            checkLoginStatus();
            
            // Initial render
            updateFilteredProducts();
            renderProductTable();
            updatePagination();
            updateDisplayCount();
            
            // Setup event listeners
            initEventListeners();
            
            // Inisialisasi filter aktif
            updateActiveFilterButton();
        });
    </script>
</body>
</html>